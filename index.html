-- Tạo bảng users
CREATE TABLE users (
    id BIGSERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    token VARCHAR(100),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    last_login TIMESTAMPTZ
);

-- Tạo bảng work_records
CREATE TABLE work_records (
    id BIGSERIAL PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    date VARCHAR(20) NOT NULL,
    start_time VARCHAR(10),
    end_time VARCHAR(10),
    total_hours DECIMAL(10,2),
    overtime DECIMAL(10,2),
    is_weekday BOOLEAN,
    is_saturday BOOLEAN,
    lunch_overtime BOOLEAN DEFAULT FALSE,
    is_auto_started BOOLEAN DEFAULT FALSE,
    is_auto_ended BOOLEAN DEFAULT FALSE,
    device_id VARCHAR(100),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(username, date)
);

-- Tạo indexes
CREATE INDEX idx_users_username ON users(username);
CREATE INDEX idx_work_records_username ON work_records(username);
CREATE INDEX idx_work_records_date ON work_records(date);
